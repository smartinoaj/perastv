/* --- MODERN DARK THEME (Neutral / Blue) --- */

/* --- Color Palette & Root Variables --- */
:root {
    --bg-primary: #0b1220;        /* Deep slate */
    --bg-secondary: #111827;      /* Card / panels */
    --bg-tertiary: #1f2937;       /* Hovers / pills */
    --accent-color: #3b82f6;      /* Blue accent (primary) */
    --accent-hover: #2563eb;      /* Darker blue on hover */
    --text-primary: #e5e7eb;      /* Primary text */
    --text-secondary: #9ca3af;    /* Secondary text */
    --border-color: #283245;      /* Subtle borders */
    --recommended-color: #a3e635; /* Lime for Recommended */
    --goat-color: #22d3ee;        /* Cyan for GOAT */
    --focus-ring: #93c5fd;        /* Soft focus ring */
    --font-sans: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* --- Basic Reset & Body Styling --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: var(--font-sans);
    background-color: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}
.container { max-width: 1200px; margin: 0 auto; padding: 20px; }

/* --- Header --- */
header {
    text-align: center;
    padding: 2.75rem 1rem;
    border-bottom: 1px solid var(--border-color);
    background: radial-gradient(1200px 240px at 50% -40px, rgba(59,130,246,0.15), rgba(0,0,0,0));
}
header h1 {
    font-size: 2.375rem;
    font-weight: 700;
    margin-bottom: 0.75rem;
    color: var(--text-primary);
    letter-spacing: .2px;
}
header p { font-size: 1.075rem; color: var(--text-secondary); max-width: 640px; margin: 0 auto; }

/* --- Main Tab Navigation --- */
.tabs-nav {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: -1px;
    padding: 1.25rem 0 1.5rem;
    border-bottom: 1px solid var(--border-color);
    background-color: transparent;
}
.tab-button {
    background: transparent;
    border: 1px solid transparent;
    color: var(--text-secondary);
    padding: 0.7rem 1.25rem;
    font-size: 0.975rem;
    font-weight: 600;
    border-radius: 999px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: background-color .18s ease, color .18s ease, border-color .18s ease, transform .18s ease;
}
.tab-button svg { width: 1.25em; height: 1.25em; }
.tab-button:hover { background-color: var(--bg-tertiary); color: var(--text-primary); border-color: var(--border-color); }
.tab-button:focus-visible { outline: 0; box-shadow: 0 0 0 3px var(--focus-ring); }
.tab-button.active { background-color: var(--accent-color); color: #ffffff; border-color: var(--accent-color); }

/* --- Main Tab Content Panels --- */
.tabs-content { padding-top: 3rem; }
.tab-content { display: none; animation: fadeIn 0.45s ease; }
.tab-content.active { display: block; }

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to   { opacity: 1; transform: translateY(0);  }
}

/* --- Sub-Tab Navigation (Pill Style) --- */
.sub-tabs-nav {
    display: flex;
    justify-content: center;
    gap: 0.75rem;
    margin-bottom: 2.25rem;
    padding: 0.5rem;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 999px;
    max-width: max-content;
    margin-left: auto;
    margin-right: auto;
    backdrop-filter: blur(2px);
}
.sub-tab-button {
    background: transparent;
    border: 1px solid transparent;
    color: var(--text-secondary);
    padding: 0.55rem 1.15rem;
    font-size: 0.92rem;
    font-weight: 600;
    border-radius: 999px;
    cursor: pointer;
    transition: background-color .18s ease, color .18s ease, border-color .18s ease, box-shadow .18s ease;
}
.sub-tab-button:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
}
.sub-tab-button:focus-visible { outline: 0; box-shadow: 0 0 0 3px var(--focus-ring); }
.sub-tab-button.active {
    background-color: var(--accent-color);
    color: #ffffff;
    border-color: var(--accent-color);
    box-shadow: 0 6px 18px -6px rgba(59,130,246,.55);
}
/* Diamond style variant if you ever use it */
.sub-tab-button-diamond.active {
    background-color: var(--goat-color);
    border-color: var(--goat-color);
    color: var(--bg-primary);
    box-shadow: 0 6px 18px -6px rgba(34,211,238,.55);
}

/* --- Sub-Tab Content Panels --- */
.sub-tab-content { display: none; animation: fadeIn 0.45s ease; }
.sub-tab-content.active { display: block; }

/* --- FIX: Stremio subcategory should NOT look active by default --- */
/* Inactive matches other pills; blue only on hover/active */
#movies-tv .sub-tabs-nav .sub-tab-button[data-subtab="stremio"] {
  background-color: transparent;        /* inactive */
  color: var(--text-secondary);
  border-color: transparent;
  box-shadow: none;
  animation: none;
}
#movies-tv .sub-tabs-nav .sub-tab-button[data-subtab="stremio"]:hover {
  background-color: var(--goat-color);  /* cyan on hover for category identity */
  color: #0b1220;
  box-shadow: 0 0 18px rgba(34,211,238,.45);
}
#movies-tv .sub-tabs-nav .sub-tab-button[data-subtab="stremio"].active {
  background-color: var(--goat-color);  /* cyan when active */
  color: #0b1220;
  border-color: var(--goat-color);
  box-shadow: 0 0 26px rgba(34,211,238,.55);
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  #movies-tv .sub-tabs-nav .sub-tab-button[data-subtab="stremio"].active { box-shadow: none; }
}

/* --- Stremio Cards: subtle cyan accent on hover --- */
#movies-tv #stremio .card { border-color: rgba(34,211,238,.35); transition: all .22s ease; }
#movies-tv #stremio .card:hover {
  border-color: var(--goat-color);
  box-shadow: 0 10px 28px -8px rgba(34,211,238,.35);
  transform: translateY(-4px);
}
#movies-tv #stremio .card .btn-link:hover {
  border-color: var(--goat-color);
  box-shadow: 0 0 18px rgba(34,211,238,.35);
}

/* --- Grid & Card Styles --- */
.grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1.5rem;
}
.card {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 14px;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: visible;
    transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.card:hover { transform: translateY(-3px); border-color: #33507a; box-shadow: 0 12px 26px -10px rgba(0,0,0,.45); }
.card h3 {
    font-size: 1.2rem;
    font-weight: 650;
    margin-bottom: 0.75rem;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.card p { color: var(--text-secondary); flex-grow: 1; margin-bottom: 1.1rem; }

/* --- Recommended Item Styles --- */
.card.recommended { border-color: var(--recommended-color); box-shadow: 0 0 20px rgba(163,230,53,.08); }
.card.recommended:hover { border-color: var(--recommended-color); }

.recommended-star {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 24px;
    height: 24px;
    color: var(--recommended-color);
    cursor: pointer;
    z-index: 5;
}
.card.recommended h3, .card.diamond h3 { padding-right: 2rem; }

/* --- Tooltip for Icons --- */
.recommended-star::after, .diamond-icon::after, .info-icon::after {
    content: attr(data-tooltip);
    position: absolute;
    right: 140%;
    top: 50%;
    transform: translateY(-50%);
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 500;
    white-space: nowrap;
    z-index: 10;
    opacity: 0;
    visibility: hidden;
    transition: opacity .18s ease, visibility .18s ease;
    pointer-events: none;
    border: 1px solid var(--border-color);
}
.info-icon::after { left: 120%; right: auto; }
.recommended-star:hover::after, .diamond-icon:hover::after, .info-icon:hover::after { opacity: 1; visibility: visible; }

/* --- Diamond (GOAT) Item Styles --- */
.card.diamond {
    border-color: var(--goat-color);
    box-shadow: 0 0 26px hsla(188, 85%, 53%, 0.35);
}
.card.diamond:hover { border-color: var(--goat-color); }
.diamond-icon {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 24px;
    height: 24px;
    color: var(--goat-color);
    cursor: pointer;
    z-index: 5;
}

/* --- Info Icon --- */
.info-icon {
    display: inline-flex;
    align-items: center;
    width: 16px;
    height: 16px;
    color: var(--text-secondary);
    cursor: help;
    position: relative;
}
.info-icon svg { width: 100%; height: 100%; }

/* --- Buttons --- */
.card-buttons { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: auto; }
.btn-link {
    display: inline-block;
    padding: 0.6rem 1.15rem;
    text-align: center;
    text-decoration: none;
    border-radius: 10px;
    font-weight: 650;
    transition: all .18s ease;
    border: 1px solid transparent;
    cursor: pointer;
    font-family: inherit;
    font-size: 0.92rem;
}
.btn-link:active { transform: scale(0.985); }
.btn-link:focus-visible { outline: 0; box-shadow: 0 0 0 3px var(--focus-ring); }

/* Primary button (Blue) */
.btn-primary { background-color: var(--accent-color); color: #ffffff; border-color: var(--accent-color); }
.btn-primary:hover { background-color: var(--accent-hover); border-color: var(--accent-hover); }

/* Primary button for Recommended cards (Lime) */
.btn-primary-rec { background-color: var(--recommended-color); color: var(--bg-primary); border-color: var(--recommended-color); }
.btn-primary-rec:hover { background-color: #84cc16; border-color: #84cc16; }

/* Primary button for Diamond cards (Cyan) */
.btn-diamond { background-color: var(--goat-color); color: var(--bg-primary); border-color: var(--goat-color); }
.btn-diamond:hover { background-color: #15b8d1; border-color: #15b8d1; }

/* Secondary button (Subtle outline) */
.btn-secondary { background-color: transparent; color: var(--text-secondary); border-color: var(--border-color); }
.btn-secondary:hover { background-color: var(--bg-tertiary); color: var(--text-primary); border-color: #334155; }

/* --- Footer & Modal & Placeholders --- */
footer {
    text-align: center;
    padding: 3rem 1rem;
    margin-top: 3rem;
    border-top: 1px solid var(--border-color);
    color: var(--text-secondary);
    font-size: 0.9rem;
}
.modal-overlay {
    position: fixed; inset: 0;
    background-color: rgba(2,6,23,.75);
    backdrop-filter: blur(5px);
    display: flex; justify-content: center; align-items: center;
    z-index: 1000; padding: 1rem;
    visibility: hidden; opacity: 0; transition: all .25s ease;
}
.modal-overlay.visible { visibility: visible; opacity: 1; }
.modal-content {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 14px;
    padding: 2rem 2.25rem;
    width: 100%; max-width: 800px; max-height: 90vh;
    overflow-y: auto; position: relative;
    transform: translateY(6px); transition: transform .25s ease;
    box-shadow: 0 30px 60px -25px rgba(0,0,0,.6);
}
.modal-overlay.visible .modal-content { transform: translateY(0); }
.modal-close {
    position: absolute; top: 1rem; right: 1.25rem;
    background: none; border: none; color: var(--text-secondary);
    font-size: 2rem; line-height: 1; cursor: pointer; transition: color .18s ease, transform .18s ease;
}
.modal-close:hover { color: var(--text-primary); transform: rotate(90deg); }
.tutorial-body h2 { font-size: 1.65rem; margin-bottom: 1.25rem; color: var(--text-primary); }
.tutorial-body h3 { font-size: 1.15rem; margin-top: 1.5rem; margin-bottom: 0.75rem; color: var(--accent-color); }
.tutorial-body p, .tutorial-body ol { line-height: 1.75; color: var(--text-secondary); font-size: 1rem; }
.tutorial-body ol { padding-left: 25px; }
.tutorial-body ol li { margin-bottom: 0.6rem; }
.placeholder-text { color: var(--text-secondary); text-align: center; padding: 4rem 1rem; font-style: italic; }

/* --- Responsive Adjustments --- */
@media (max-width: 768px) {
    .tabs-nav { gap: 0.5rem; padding: 1rem; flex-wrap: wrap; }
    .tab-button { padding: 0.5rem 1rem; font-size: 0.9rem; }
    header h1 { font-size: 2rem; }
    .sub-tabs-nav { flex-wrap: wrap; border-radius: 12px; padding: 0.75rem; }
}
