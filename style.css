/* =============== */
/* NEW MEGATHREAD  */
/* =============== */

:root{
  --bg-0:#0b0f19;            /* page */
  --bg-1:#0f1626;            /* header & cards */
  --bg-2:#111a2d;            /* panels / subtabs shell */
  --bg-3:#1b2742;            /* hover */
  --text-0:#e7ecf5;          /* primary text */
  --text-1:#9fb0cd;          /* secondary text */
  --border:#223153;          /* borders */
  --ring:#5ea0ff;            /* focus ring */

  --orange:#F97316;          /* accent */
  --orange-2:#EA580C;        /* accent hover */
  --gold:#FBBF24;            /* recommended */
  --cyan:#22d3ee;            /* GOAT / Stremio identity */

  --radius:14px;
  --shadow:0 20px 50px -25px rgba(0,0,0,.6);
}

*{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}
body{
  margin:0;
  font-family:'Inter',system-ui,Segoe UI,Roboto,Arial,sans-serif;
  background: radial-gradient(1200px 300px at 50% -120px, rgba(249,115,22,.12), rgba(0,0,0,0)) , var(--bg-0);
  color:var(--text-0);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
.no-scroll{overflow:hidden}

/* Header */
.app-header{
  position:sticky; top:0; z-index:50;
  backdrop-filter:saturate(140%) blur(8px);
  background:linear-gradient(180deg, rgba(15,22,38,.9), rgba(15,22,38,.7));
  border-bottom:1px solid var(--border);
}
.header-inner{
  max-width:1200px; margin:0 auto; padding:18px 20px;
  display:grid; grid-template-columns:1fr auto; grid-template-areas:
  "brand actions"
  "subtitle actions";
  row-gap:6px; column-gap:16px;
}
.brand{grid-area:brand; display:flex; align-items:center; gap:10px;}
.brand-logo{font-size:20px}
.brand-title{font-size:22px; font-weight:700; margin:0}
.brand-subtitle{grid-area:subtitle; margin:0; color:var(--text-1); font-size:14px}
.header-actions{grid-area:actions; display:flex; align-items:center; gap:10px}
.kbd-tip{
  background:transparent; border:1px solid var(--border); color:var(--text-1);
  padding:6px 10px; border-radius:10px; cursor:pointer; font-weight:600;
}
.kbd-tip:hover{background:var(--bg-3); color:var(--text-0)}
.search-wrap{position:relative}
.search-input{
  width:220px; max-width:48vw;
  background:var(--bg-2); color:var(--text-0);
  border:1px solid var(--border); border-radius:10px;
  padding:10px 12px; outline:none;
}
.search-input:focus{box-shadow:0 0 0 3px var(--ring); border-color:transparent}

/* Layout */
.app-layout{
  max-width:1200px; margin:0 auto; padding:24px 20px;
  display:grid; grid-template-columns:260px 1fr; gap:20px;
}

/* Sidebar */
.sidebar{
  position:sticky; top:84px; align-self:start;
  background:var(--bg-1);
  border:1px solid var(--border); border-radius:var(--radius);
  padding:12px; box-shadow:var(--shadow);
}
.main-tabs{list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px}
.tab-button{
  width:100%; text-align:left;
  background:transparent; border:1px solid transparent;
  color:var(--text-1);
  padding:12px 12px; border-radius:12px; cursor:pointer; font-weight:700;
  display:flex; align-items:center; gap:10px;
  transition:background .18s ease, color .18s ease, border-color .18s ease;
}
.tab-button .icon{opacity:.9}
.tab-button:hover{background:var(--bg-3); color:var(--text-0); border-color:var(--border)}
.tab-button:focus-visible{outline:0; box-shadow:0 0 0 3px var(--ring)}
.tab-button.active{
  background:linear-gradient(180deg, var(--orange), var(--orange-2));
  color:#121212; border-color:transparent;
}

/* Content */
.content{
  min-width:0;
}
.panel{
  display:none;
  background:var(--bg-1);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:22px;
  animation:fade .35s ease;
}
.panel.active{display:block}
.panel-header{margin-bottom:16px}
.panel-header h2{font-size:22px; margin:0 0 6px 0}
.muted{color:var(--text-1)}

/* Subtabs */
.subtabs{
  display:flex; gap:8px; flex-wrap:wrap;
  background:var(--bg-2);
  border:1px solid var(--border);
  border-radius:999px; padding:6px;
  margin:8px 0 18px;
}
.subtab{
  background:transparent; border:1px solid transparent;
  color:var(--text-1); font-weight:700;
  border-radius:999px; padding:8px 14px; cursor:pointer;
  transition:background .18s ease, color .18s ease, border-color .18s ease, box-shadow .18s ease;
}
.subtab:hover{background:var(--bg-3); color:var(--text-0)}
.subtab:focus-visible{outline:0; box-shadow:0 0 0 3px var(--ring)}
.subtab.active{
  background:var(--orange); color:#111827; border-color:transparent;
  box-shadow:0 8px 24px -10px rgba(249,115,22,.65);
}

/* Stremio identity: cyan on hover/active ONLY */
#movies-tv .subtabs .subtab[data-subtab="stremio"]{ /* inactive default */ }
#movies-tv .subtabs .subtab[data-subtab="stremio"]:hover{
  background:var(--cyan); color:#0a0f1a;
  box-shadow:0 8px 24px -10px rgba(34,211,238,.6);
}
#movies-tv .subtabs .subtab[data-subtab="stremio"].active{
  background:var(--cyan); color:#0a0f1a;
  box-shadow:0 8px 26px -10px rgba(34,211,238,.7);
}

/* Subpanels */
.subpanel{display:none; animation:fade .35s ease}
.subpanel.active{display:block}

/* Cards */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  gap:16px;
}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
  border:1px solid var(--border);
  border-radius:12px; padding:18px;
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  position:relative; overflow:visible;
}
.card:hover{transform:translateY(-3px); border-color:#2b3f6b; box-shadow:0 16px 34px -16px rgba(0,0,0,.65)}
.card h3{margin:0 0 8px; font-size:18px}
.card p{color:var(--text-1); margin:0 0 14px}

.badge{
  position:absolute; top:12px; right:12px;
  font-size:11px; font-weight:800; letter-spacing:.4px;
  padding:6px 8px; border-radius:999px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.25); backdrop-filter:blur(4px);
}
.badge-rec{color:#161616; background:linear-gradient(180deg, var(--gold), #f59e0b)}
.badge-goat{color:#0a0f1a; background:linear-gradient(180deg, var(--cyan), #15b8d1)}

.card-actions{display:flex; flex-wrap:wrap; gap:10px; margin-top:auto}

/* Buttons */
.btn{
  --btn-bg:transparent; --btn-fg:var(--text-0); --btn-bd:var(--border);
  display:inline-flex; align-items:center; justify-content:center;
  padding:10px 14px; border-radius:10px; font-weight:800; font-size:14px;
  background:var(--btn-bg); color:var(--btn-fg); border:1px solid var(--btn-bd);
  cursor:pointer; text-decoration:none; transition:transform .12s ease, background .18s ease, border-color .18s ease, color .18s ease, box-shadow .18s ease;
}
.btn:hover{transform:translateY(-1px); background:var(--bg-3); border-color:#2b3f6b}
.btn:active{transform:translateY(0)}
.btn:focus-visible{outline:0; box-shadow:0 0 0 3px var(--ring)}
.btn-primary{--btn-bg:linear-gradient(180deg, var(--orange), var(--orange-2)); --btn-fg:#161616; --btn-bd:transparent}
.btn-primary:hover{filter:saturate(1.05) brightness(.98)}
.btn-goat{--btn-bg:var(--cyan); --btn-fg:#0a0f1a; --btn-bd:transparent}
.btn-ghost{--btn-bg:transparent; --btn-fg:var(--text-1); --btn-bd:var(--border)}
.btn-icon{width:38px; height:38px; padding:0}

/* Info pill */
.info-pill{
  display:inline-grid; place-items:center; width:18px; height:18px; border-radius:999px;
  background:var(--bg-3); color:var(--text-1); font-size:12px; margin-left:6px; border:1px solid var(--border);
}

/* Footer */
.app-footer{
  margin-top:22px; padding-top:16px;
  border-top:1px solid var(--border);
  color:var(--text-1); text-align:center;
}

/* Modal */
.modal{position:fixed; inset:0; display:grid; place-items:center; visibility:hidden; opacity:0; transition:opacity .2s ease, visibility .2s ease}
.modal[aria-hidden="false"]{visibility:visible; opacity:1}
.modal-backdrop{position:absolute; inset:0; background:rgba(7,10,18,.75); backdrop-filter:blur(6px)}
.modal-content{
  position:relative; z-index:1; width:min(860px,92vw); max-height:88vh; overflow:auto;
  background:var(--bg-1); border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow);
  padding:22px 24px; transform:translateY(10px); animation:slideUp .25s ease forwards;
}
.modal-title{margin:0 0 10px}
.modal-body{color:var(--text-1)}
.close{position:absolute; top:10px; right:10px}

/* Animations */
@keyframes fade{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)}}
@keyframes slideUp{to{transform:translateY(0)}}

/* Responsive */
@media (max-width: 980px){
  .app-layout{grid-template-columns:1fr}
  .sidebar{position:relative; top:auto; order:-1}
}
@media (max-width: 600px){
  .header-inner{grid-template-columns:1fr; grid-template-areas:"brand" "actions" "subtitle"}
  .search-input{width:100%}
}

/* Tutorial content defaults */
.tutorial-body h3{color:var(--orange); margin:12px 0 8px}
.tutorial-body ol{margin:0; padding-left:20px}
.tutorial-body li{margin:6px 0}
